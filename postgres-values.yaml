# Use official PostgreSQL image
image:
  repository: docker.io/library/postgres
  tag: "15"
  pullPolicy: IfNotPresent

# Disable Bitnami-specific replication and presets
architecture: standalone

# Disable metrics (Bitnami)
metrics:
  enabled: false

# Use local persistence (optional)
primary:
  persistence:
    enabled: false
    size: 5Gi

  # Remove Bitnami resourcesPreset
  resources: 
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1"
      memory: "1Gi"

  # Standard PostgreSQL config (optional, official image supports env vars)
  extendedConfiguration: |
    max_connections = 300
    log_destination = 'stderr'
    logging_collector = on
    log_min_duration_statement = 1000
    log_statement = 'all'

# Remove readReplicas for simplicity (official image won't handle Bitnami replication)
readReplicas:
  replicaCount: 0

# Disable Bitnami replication
replication:
  enabled: false

# Use existing secret
auth:
  existingSecret: postgresql
